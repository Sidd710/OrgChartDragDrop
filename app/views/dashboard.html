<div>
  <div ng-if="isLoading" data-ng-include="loading()">
  </div>
  <div class="content">
    <div class="row menu">
      <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="bs-component">
          <ol class="breadcrumb">
            <li class="breadcrumb-item active">Dashboard</li>
          </ol>
        </div>
        <div class="pull-right">
          <button type="button" class="btn" ng-click="addWaterPoint()">Add Water Point</button>
          <div class="btn-group">
            <button class="btn dropdown-toggle" type="button" id="buttonMenu1" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">
              {{waterpoint}}
            </button>
            <div class="dropdown-menu" aria-labelledby="buttonMenu1">
              <a class="dropdown-item" ng-click="filter('type', 'All (Water Points)')">{{'All (Water Points)' | limitTo:21}}</a>
            <a class="dropdown-item" ng-repeat="type in waterPointTypes" ng-value="type.id" ng-click="filter('type', type.typename)">{{type.typename | limitTo:21}}</a>
          </div>
          </div>
          <div class="btn-group">
            <button class="btn dropdown-toggle" type="button" id="buttonMenu2" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">
              {{county}}
            </button>
            <div class="dropdown-menu" aria-labelledby="buttonMenu2">
              <a class="dropdown-item" ng-click="filter('county', 'All (Counties)')">{{'All (Counties)' | limitTo:21}}</a>
              <a class="dropdown-item" ng-repeat="county in counties" ng-value="county.id" ng-click="filter('county', county.name)">{{county.name}}</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-3">
        <div class="panel">
          <div class="panel-body info">
            <span class="icon pull-right"><i class="material-icons" style="color: #0f0f0f;">group</i></span>
            <h4>{{popn | number}}</h4>
            <p>Population served</p>
          </div>
        </div>
      </div>
      <div class="col-lg-3">
        <div class="panel">
          <div class="panel-body info">
            <span class="icon pull-right"><i class="material-icons">opacity</i></span>
            <h4>{{noOfFunctionalWaterPoints}}</h4>
            <p>Functional Water Points</p>
          </div>
        </div>
      </div>
      <div class="col-lg-3">
        <div class="panel">
          <div class="panel-body info">
            <span class="icon pull-right"><i class="material-icons" style="color: #0f0f0f;">priority_high</i></span>
            <h4>{{noOfNonFunctionalWaterPoints}}</h4>
            <p>Non Functional Water Points</p>
          </div>
        </div>
      </div>
      <div class="col-lg-3">
        <div class="panel">
          <div class="panel-body info">
            <span id="icon" class="pull-right"><i class="material-icons" style="color: #0f0f0f;">help</i></span>
            <h4>{{unknownWaterPoints}}</h4>
            <p>Unknown Status Water Points</p>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-8">
        <div class="panel dashboard">
          <div class="panel-body">
            <table datatable="ng" dt-options="dtOptions" class="table table-striped table-hover">
              <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>County</th>
                <th>Status</th>
                <th>Sensor</th>
                <th>Constructed</th>
                <th></th>
              </tr>
              </thead>
              <tbody>
              <tr ng-repeat="row in table">
                <td>{{row.name | limitTo: 10}}{{row.name.length > 15 ? '...' : ''}}</td>
                <td>{{row.type}}</td>
                <td>{{row.county}}</td>
                <td>{{row.status}}</td>
                <td>{{row.sensors}}</td>
                <td>{{row.yoc}}</td>
                <td class="text-center">
                  <button class="btn btn-info" ng-click="view(row.data)" data-toggle="tooltip" data-placement="bottom" title="View"><i class="material-icons">visibility</i></button>
                  <button class="btn btn-info" ng-click="edit(row.data)" data-toggle="tooltip" data-placement="bottom" title="Edit"><i class="material-icons">edit</i></button>
                  <button class="btn btn-info" ng-click="delete(row.id) "data-toggle="tooltip" data-placement="bottom" title="Delete"><i class="material-icons">delete</i></button>
                </td>
              </tr>
              </tbody>
            </table>
            <!--<table datatable="" dt-options="dtOptions" dt-columns="dtColumns" dt-instance="dtInstanceCallback" class="table table-striped table-hover">
              <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>County</th>
                <th>Status</th>
                <th>Sensors</th>
                <th>YOC</th>
                <th class="text-center">Action</th>
              </tr>
              </thead>
            </table>-->
          </div>
        </div>
      </div>
      <div class="col-lg-4">
        <div class="panel">
          <div class="panel-body">
            <leaflet id="dashboard" bounds="bounds" center="center" markers="markers" height="{{mapHeight}}"></leaflet>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
